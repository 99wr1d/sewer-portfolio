/**
 * NUXT.CONFIG.TS — Конфигурация Nuxt приложения
 *
 * Здесь настраивается всё приложение:
 * - Подключённые модули (Tailwind, Image, VueUse)
 * - Meta-теги для SEO
 * - Шрифты
 * - TypeScript настройки
 *
 * Документация: https://nuxt.com/docs/api/configuration/nuxt-config
 */

// https://nuxt.com/docs/api/configuration/nuxt-config
export default defineNuxtConfig({
  // Дата совместимости — для корректной работы с будущими версиями Nuxt
  compatibilityDate: '2025-07-15',

  // Включить Vue DevTools в браузере (только в режиме разработки)
  devtools: { enabled: true },

  // =============================================================================
  // МОДУЛИ
  // Расширения функциональности Nuxt
  // =============================================================================
  modules: [
    // Tailwind CSS — утилитарный CSS фреймворк
    // Конфигурация в tailwind.config.ts
    '@nuxtjs/tailwindcss',

    // Оптимизация изображений — автоматическое сжатие и форматы WebP/AVIF
    // Использование: <NuxtImg src="/image.jpg" />
    '@nuxt/image',

    // VueUse — коллекция полезных Vue composables
    // Документация: https://vueuse.org/
    '@vueuse/nuxt',

    // ESLint — проверка качества кода
    '@nuxt/eslint',
  ],

  // =============================================================================
  // HEAD — Meta-теги и подключение ресурсов
  // Важно для SEO и отображения в соцсетях
  // =============================================================================
  app: {
    head: {
      // Заголовок вкладки браузера
      title: 'Leysan — Швейная мастерская в Алматы',

      // Язык страницы
      htmlAttrs: {
        lang: 'ru',
      },

      // Meta-теги
      meta: [
        // Кодировка
        { charset: 'utf-8' },
        // Адаптивность для мобильных
        { name: 'viewport', content: 'width=device-width, initial-scale=1' },
        // Описание для поисковиков (отображается в результатах поиска)
        {
          name: 'description',
          content: 'Швейная мастерская Leysan — полотенца и халаты с индивидуальной вышивкой. Доставка по Казахстану и России.',
        },
        // Отключить автоопределение телефонных номеров на iOS
        { name: 'format-detection', content: 'telephone=no' },
      ],

      // Подключение внешних ресурсов
      link: [
        // Фавиконка (иконка во вкладке браузера)
        { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },

        // Google Fonts — подключение шрифтов
        // preconnect — предварительное подключение для ускорения загрузки
        {
          rel: 'preconnect',
          href: 'https://fonts.googleapis.com',
        },
        {
          rel: 'preconnect',
          href: 'https://fonts.gstatic.com',
          crossorigin: '',
        },
        // Шрифты:
        // - Cormorant Garamond — элегантный serif для заголовков
        // - Inter — современный sans-serif для текста
        {
          rel: 'stylesheet',
          href: 'https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap',
        },
      ],
    },
  },

  // =============================================================================
  // CSS — Глобальные стили
  // =============================================================================
  css: ['~/assets/css/main.css'],

  // =============================================================================
  // TAILWIND — Настройки Tailwind CSS
  // =============================================================================
  tailwindcss: {
    cssPath: '~/assets/css/main.css',
    configPath: 'tailwind.config.ts',
  },

  // =============================================================================
  // IMAGE — Настройки оптимизации изображений
  // =============================================================================
  image: {
    // Качество сжатия (0-100)
    quality: 80,
    // Форматы для автоматической конвертации
    // webp и avif — современные форматы с лучшим сжатием
    format: ['webp', 'avif', 'jpg'],
  },

  // =============================================================================
  // TYPESCRIPT — Настройки TypeScript
  // =============================================================================
  typescript: {
    // Строгий режим — больше проверок, меньше ошибок
    strict: true,
    // Проверка типов при сборке
    // Отключено, так как требует установки vue-tsc: npm i -D vue-tsc
    typeCheck: false,
  },
})
